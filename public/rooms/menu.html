<!doctype html>
<head>
	<style type = "text/css">
		button {min-width: 200px; width: 40%; margin-bottom: 5px;}
	</style>
</head>

<div class="container" style="display: flex; justify-content: center;">
	<ol id='rooms-buttons-list'>
		<li><button id = 'btn' type="button" class="btn btn-primary">Canvas Room 1</button><button id = 'btn-make' type="button" class="btn btn-primary">Make room 1</button></li>
		<li><button id = 'btn2' type="button" class="btn btn-success">Canvas Room 2</button><button id = 'btn2-make' type="button" class="btn btn-success">Make room 2</button></li>
		<li><button id = 'btn3' type="button" class="btn btn-warning">Canvas Room 3</button><button id = 'btn3-make' type="button" class="btn btn-warning">Make room 3</button></li>
		<li><button id = 'btn4' type="button" class="btn btn-danger">Canvas Room 4</button><button id = 'btn4-make' type="button" class="btn btn-danger">Make room 4</button></li>
		<li id='btn-add-li'><button id = 'btn-add' type="button" class="btn btn-light">Add/Create Canvas</button>

	</ol>
</div>
<script>
	let rooms_count=4;
	let canvas_room_str = "Canvas Room ";
	let add_button = $('#btn-add');
	let last_button = $('#btn4');
	$('#btn').on('click', function(){
		$("#includedContent").load("/rooms/canvas.html");
		setIntent($('#btn').text());
	})
	$('#btn-make').on('click', function(){
		socket.emit('makeRoom', {
			'name': $('#btn').text(),
			'path': 'stock_image.jpg'
		})
	})	

	$('#btn2').on('click', function(){
		$("#includedContent").load("/rooms/canvas.html");
		setIntent($('#btn2').text());
	})
	$('#btn2-make').on('click', function(){
		socket.emit('makeRoom', {
			'name': $('#btn2').text(),
			'path': 'stock_apple.png'
		})
	})

	$('#btn3').on('click', function(){
		$("#includedContent").load("/rooms/canvas.html");
		setIntent($('#btn3').text());
	})
	$('#btn3-make').on('click', function(){
		socket.emit('makeRoom', {
			'name': $('#btn3').text(),
			'path': 'stock_image.jpg'
		})
	})

	$('#btn4').on('click', function(){
		$("#includedContent").load("/rooms/canvas.html");
		setIntent($('#btn4').text());
	})
	$('#btn4-make').on('click', function(){
		socket.emit('makeRoom', {
			'name': $('#btn4').text(),
			'path': 'stock_apple.png'
		})
	})
    function gotoroom(room){
	    let room_str = room;
        $('#btn4').on('click', function(){
            $("#includedContent").load("/rooms/canvas.html");
            setIntent($('#btn4').text());
        })
	}

    // $('button').on('click', function(){
    //     //if()
    //
    //     $("#includedContent").load("/rooms/canvas.html");
    //     setIntent($('#btn4').text());
    // })


    $('#btn-add').on('click', function(){
        rooms_count++;//increment rooms count
        console.log(canvas_room_str + rooms_count);

		let element = $('<li>');
		let element_add = $('#btn-add-li');
        let myButton = document.createElement('button');
        let button_id = 'btn' + rooms_count;
        let button_txt = canvas_room_str + rooms_count;
        let button_class = '';
        if(rooms_count%5===0){
            button_class = "\"btn btn-secondary\"";
		}
		else if(rooms_count%5===1){
            button_class = "\"btn btn-primary\"";
		}
        else if(rooms_count%5===2){
            button_class = "\"btn btn-success\"";
        }
        else if(rooms_count%5===3){
            button_class = "\"btn btn-warning\"";
        }
        else{
            button_class = "\"btn btn-danger\"";
		}
		//console.log(button_class);
		myButton = "<button id =" + button_id + " type=\"button\" class="+ button_class +">" + button_txt + "</button>";

        element.append(myButton);
        element.insertBefore(element_add);

        document.getElementById(button_id).addEventListener('click', function(){
            $("#includedContent").load("/rooms/canvas.html");
            setIntent($('#'+button_id).text());
        })

        socket.emit('makeRoom', {
            'name': canvas_room_str + rooms_count,
            'path': 'stock_apple.png'
        })
    })
</script>
